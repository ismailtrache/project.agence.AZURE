{% extends "base.html" %}
{% block content %}
<style>
    .destinations-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
    @media (min-width: 576px) { .destinations-grid { grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2.5rem; } }
    .destination-card { background: white; border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); transition: all 0.3s ease; position: relative; }
    .destination-card img { width: 100%; height: 320px; object-fit: cover; }
    .dest-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%); }
    .dest-content { position: absolute; bottom: 0; left: 0; padding: 1.5rem; color: white; width: 100%; }
    .dest-price { position: absolute; top: 1rem; right: 1rem; background: var(--accent); color: var(--dark); padding: 0.5rem 1rem; border-radius: 50px; font-weight: 700; }
    @media (max-width: 576px) {
        .destination-card img { height: 230px; }
    }
</style>
<div class="page-header"><h1>Explorez le Monde</h1></div>
<section class="section">
    <div class="container">
        <h2 class="section-title">Toutes Nos Destinations</h2>
        <p class="section-subtitle">
            {% if query %}
                Résultats de la recherche pour : <strong>{{ query }}</strong>
            {% else %}
                Des métropoles vibrantes aux plages paradisiaques, trouvez l'inspiration.
            {% endif %}
        </p>
        <div class="destinations-grid">
            {% for destination in destinations %}
            <a href="{{ url_for('contact') }}" class="destination-card quote-link" style="text-decoration: none; display: block;">
                <img src="{% if 'http' in destination.image %}{{ destination.image }}{% else %}{{ url_for('static', filename=destination.image) }}{% endif %}" alt="{{ destination.nom }}">
                <div class="dest-overlay"></div><div class="dest-price">{{ destination.prix }}</div>
                <div class="dest-content"><h3>{{ destination.nom }}</h3><p>{{ destination.description }}</p></div>
            </a>
            {% else %}
            <p>Aucune destination trouvée pour votre recherche.</p>
            {% endfor %}
        </div>
        {% if services_results %}
        <div style="margin-top:3rem;">
            <h3 class="section-title" style="font-size:1.5rem;">Services correspondants</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                {% for service in services_results %}
                <a href="{{ url_for('service_detail', service_name=service.nom) }}" style="text-decoration:none; color:inherit;">
                    <div class="destination-card" style="height:auto;">
                        <div class="dest-content" style="position:relative; color:var(--primary); padding:1.5rem;">
                            <h3 style="color:var(--primary); margin-bottom:0.5rem;">{{ service.nom }}</h3>
                            <p style="color:var(--text-secondary);">{{ service.description }}</p>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
